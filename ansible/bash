#!/bin/bash
set -e

# Change to the project directory (adjust this path as needed)
cd /app

# Build the Docker image
docker build -t resume_web_image .

# Create the Docker network if it doesn't exist
if ! docker network inspect resume_network >/dev/null 2>&1; then
  docker network create resume_network
fi

# Run the Docker container with the required environment variables and volume mapping
docker run -d \
  --name resume_web \
  -p 5000:5000 \
  --env FLASK_ENV=development \
  --env FLASK_APP=app.py \
  --env SQLALCHEMY_DATABASE_URI="postgresql://user:password@db:5432/resume_db" \
  -v "$(pwd):/app" \
  --network resume_network \
  resume_web_image
